<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Info Videos (hosted)</title>
  <style>
    :root { color-scheme: light dark; }
    body { margin: 0; font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    .wrap { max-width: 1100px; margin: 32px auto; padding: 0 16px; }
    h1 { font-size: 20px; margin: 0 0 8px; }
    p  { margin: 0 0 20px; opacity: .8; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 16px;
    }
    .card {
      border: 1px solid #ddd;
      border-radius: 8px;
      overflow: hidden;
      background: #1111; /* faint */
    }
    .card a { color: inherit; text-decoration: none; }
    .thumb { aspect-ratio: 4 / 3; background:#000; display:block; }
    video.thumb, img.thumb { width: 100%; height: 100%; object-fit: cover; display: block; }
    .meta { padding: 10px 12px; display:flex; justify-content:space-between; align-items:center; gap:8px;}
    .name { font-weight: 600; font-size: 13px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .open { font-size: 12px; opacity:.8; }
    @media (max-width: 640px) {
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Info Videos (hosted)</h1>
    <p>These files live in <code>/videos</code>. Click a filename to download or play inline below.</p>

    <div id="grid" class="grid" aria-live="polite"></div>
  </div>

  <script>
    // --- CONFIG ---
    const TOTAL_FILES = 28; // update this if you add more
    const BASE = 'https://kkeminck.github.io/Info-video/videos/';
    const BASENAME = 'INFO_Tabs_';        // INFO_Tabs_01, 02, ...
    const VIDEO_EXT = 'mp4';
    const IMAGE_EXTS = ['jpg','jpeg','png','webp','gif'];

    // --- Helpers ---
    const pad2 = n => String(n).padStart(2,'0');
    function makeName(i){ return `${BASENAME}${pad2(i)}`; }

    function createCard(i) {
      const name = makeName(i);
      const fileUrlGuess = (ext) => `${BASE}${name}.${ext}`;

      const card = document.createElement('div');
      card.className = 'card';

      const mediaWrap = document.createElement('div');
      mediaWrap.className = 'thumb';
      card.appendChild(mediaWrap);

      const meta = document.createElement('div');
      meta.className = 'meta';
      meta.innerHTML = `
        <span class="name">${name}</span>
        <a class="open" href="#" target="_blank" rel="noopener">Open</a>
      `;
      const openLink = meta.querySelector('.open');
      card.appendChild(meta);

      // Try video first; if it errors, try images until one works.
      const tryMedia = (idx = -1) => {
        // idx = -1 => try video; >=0 => IMAGE_EXTS[idx]
        // clean previous media
        mediaWrap.innerHTML = '';

        if (idx < 0) {
          // try video
          const v = document.createElement('video');
          v.className = 'thumb';
          v.muted = true; v.loop = true; v.autoplay = true; v.playsInline = true; v.preload = 'metadata';
          v.innerHTML = `<source src="${fileUrlGuess(VIDEO_EXT)}" type="video/mp4">`;
          v.onloadeddata = () => { openLink.href = fileUrlGuess(VIDEO_EXT); };
          v.onerror = () => tryMedia(0); // go to first image ext
          mediaWrap.appendChild(v);
        } else {
          const ext = IMAGE_EXTS[idx];
          const img = document.createElement('img');
          img.className = 'thumb';
          img.decoding = 'async'; img.loading = 'lazy';
          img.src = fileUrlGuess(ext);
          img.onload = () => { openLink.href = fileUrlGuess(ext); };
          img.onerror = () => {
            if (idx + 1 < IMAGE_EXTS.length) tryMedia(idx + 1);
            else {
              // All failed â€“ show a simple placeholder and dead link
              mediaWrap.style.display = 'flex';
              mediaWrap.style.alignItems = 'center';
              mediaWrap.style.justifyContent = 'center';
              mediaWrap.style.color = '#fff';
              mediaWrap.textContent = 'Not found';
              openLink.removeAttribute('href');
            }
          };
          mediaWrap.appendChild(img);
        }
      };

      tryMedia(); // kick it off
      return card;
    }

    const grid = document.getElementById('grid');
    for (let i = 1; i <= TOTAL_FILES; i++) {
      grid.appendChild(createCard(i));
    }
  </script>
</body>
</html>
